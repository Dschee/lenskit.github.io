---
title: Experiment Quickstart
---

# Getting Started with the Evaluator

> **Note:** the Maven archetypes are deprecated in favor of using Gradle to run
> evaluations.  This page needs to be updated.

LensKit provides two *archetypes* (Maven-speak for project templates) to make it easy to get started doing an offline recommender experiment.

-   `lenskit-archetype-simple-analysis` sets up a minimal evaluation
    project that puts everything in the same directory.
-   `lenskit-archetype-fancy-analysis` creates a more sophisticated
    project that uses the Maven `src` and `target` directory
    structures appropriately, and can scale to multiple evaluation and
    analysis scripts.

You can also run LensKit directly, either with the `Main` class (in the `lenskit-cli` module) or the `lenskit` script in the binary distribution, from another build tool such as Ant, Gradle, or Make.  This page, however, shows you how to create and run an evaluation project with Maven.

## Prerequisites

The archetypes generate projects that have a few external dependencies.  You can modify the resulting projects to remove or alter many of these dependencies.  The requirements are:

- Apache Maven (version 3 or later)
- Java 6 or later (Java 7 or later is best)
- Python with [Pandas](http://pandas.pydata.org/) and matplotlib to run the included analysis scripts.  You can replace these with analysis scripts in your tool of choice, such as [R](http://www.r-project.org/).
- For the fancy archetype: a LaTeX installation with `pdflatex`.  Remove the LaTeX plugin from the generated POM file to remove this requirement.

## Creating a project

### From the command line

To create the project from the command line using the simple archetype, run:

    mvn archetype:generate \
      -DarchetypeGroupId=org.grouplens.lenskit \
      -DarchetypeArtifactId=lenskit-archetype-simple-analysis \
      -DarchetypeVersion=2.0.5 \
      -DinteractiveMode=no \
      -DgroupId=org.your.group \
      -DartifactId=your-project-name \
      -Dversion=0.1

The first three definitions are the specification of the archetype you
wish to use to create the new project.  They should all be exactly as
typed above, except possibly for `archetypeArtificatId`, which should
be the simple or fancy archetype, as you prefer, and
`archetypeVersion`, which should be the current version of the
archetype.  (Hint: this is the same as your current LensKit version.)

The last three definitions are the specification of the new project
you are creating.  In general they can be anything you want.

For cut-and-paste convenience, here's an unformatted version of the same command-line:

    mvn archetype:generate -DarchetypeGroupId=org.grouplens.lenskit -DarchetypeArtifactId=lenskit-archetype-simple-analysis -DarchetypeVersion=2.0.5 -DinteractiveMode=no -DgroupId=org.your.group -DartifactId=your-project-name -Dversion=0.1

Maven will run for a while, after which `your-directory-name` will
exist, populated with your new project!

### From Eclipse

Select ‘File → New → Project …’.  In the New Project dialog make sure
‘Create a simple project’ is *unchecked*, so you can choose an
archetype.  On the next dialog click the box ‘Include snapshot
archetypes’ if you want the latest lenskit archetypes, and filter for
‘lenskit’.  Choose the lenskit archetype you want to use to create
your project.

## Running the Project

Run `mvn lenskit-publish` to run all the LensKit evaluation phases.
This will prepare the data set, run the LensKit evaluator, analyze the
results with a Python script, and (in the fancy archetype) compile a
LaTeX document embedding the charts.

## Experimenting

The LensKit algorithms and data sets are defined in `eval.groovy`.  Modify this file to change the configurations and add new algorithms.

## Fancy Archetype Layout

This archetype is to build more sophisticated projects for doing
analysis of recommender algorithms.  The key locations are:

- `src/eval`: The key scripts that will be run as part of the evaluation.
- `target/data`: the location of the MovieLens data files, and the crossfolds.
- `target/analysis`: the location of the data files output by the evaluation, and the `.pdf` charts generated by the R script.

This archetype is for projects that do all three phases, and that
organize the input and output according to maven best practices.  All
of the scripts for the eval are in the src/eval directory.  Each
script takes in some input data, and produces some output data.  The
archetype is intended to be used with the following structure:

- `lenskit-pre-eval`: gets data into the target/data directory.  The 
  ant script in src/eval/get-data.xml is used to fetch the data.
- `lenskit-eval`: takes data from the target/data directory and creates
  a set of crossfold datasets also in target/data.  Runs an evaluation
  script in src/eval/eval.groovy, which operates on the crossfold data
  in target/data, and produces output in target/analysis.
- `lenskit-analysis`: runs an R script, producing more output in target/analysis.

The key user files that you are likely to want to edit are:
- `pom.xml`: to change the value of grouplens.mldata.acknowledgement, 
  or to change the dataset that is downloaded.
- `src/eval/get-data.xml`: to change the dataset that is downloaded.  
  May require changes in pom.xml as well.
- `src/eval/eval.groovy`: to change the lenskit evaluation that is run, 
  perhaps by configuring different recommenders.
- `src/eval/chart.R`: to change the analysis of the output data in target/analysis,  
  perhaps including the charts that are generated.

This structure fits the Maven model: all input files are in the src
tree, and all generated files are in the target tree, where they may
be cleaned by the clean target.

You can run the fancy archetype the same way as the simple archetype (above) -- though the result files will be put in slightly different places.

## More Reading

- [Evaluator documentation](../)
